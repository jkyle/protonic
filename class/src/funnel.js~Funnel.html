<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">Funnel | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/jkyle/protonic.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/funnel.js~Funnel.html">Funnel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/stack.js~Stack.html">Stack</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/stream.js~Stream.html">Stream</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/view.js~View.html">View</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><div class="header-notice">
  <div data-ice="importPath" class="import-path"><pre class="prettyprint"><code data-ice="importPathCode">import Funnel from &apos;<span><a href="file/src/funnel.js.html#lineNumber9">protonic/src/funnel.js</a></span>&apos;</code></pre></div>
  <span data-ice="access">public</span>
  <span data-ice="kind">class</span>
  
  
  
  <span data-ice="source">| <span><a href="file/src/funnel.js.html#lineNumber9">source</a></span></span>
</div>

<div class="self-detail detail">
  <h1 data-ice="name">Funnel</h1>

  

  
  
  <div class="flat-list" data-ice="extendsChain"><h4>Extends:</h4><div><span><a href="class/src/stream.js~Stream.html">Stream</a></span> &#x2192; Funnel</div></div>
  
  
  
  
  
  

  
  
  <div class="description" data-ice="description"><p>A Funnel is a special type of Stream that combines the states from feeder
streams.</p>
</div>

  

  

  

  
</div>



<div data-ice="constructorSummary"><h2>Constructor Summary</h2><table class="summary" data-ice="summary">
  <thead><tr><td data-ice="title" colspan="3">Public Constructor</td></tr></thead>
  <tbody>
  
  <tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
           <span data-ice="name"><span><a href="class/src/funnel.js~Funnel.html#instance-constructor-constructor">constructor</a></span></span><span data-ice="signature">(sourceMap: <span>Immutable.Map</span>): <span><a href="class/src/funnel.js~Funnel.html">Funnel</a></span></span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>A Funnel is a special type of Stream that combines the states from feeder
streams.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
</tbody>
</table>
</div>

<div data-ice="methodSummary"><h2>Method Summary</h2><table class="summary" data-ice="summary">
  <thead><tr><td data-ice="title" colspan="3">Public Methods</td></tr></thead>
  <tbody>
  
  <tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
           <span data-ice="name"><span><a href="class/src/funnel.js~Funnel.html#instance-method-destroy">destroy</a></span></span><span data-ice="signature">()</span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>destroy - cleans up a Funnel&apos;s feeder subscribers.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
           <span data-ice="name"><span><a href="class/src/funnel.js~Funnel.html#instance-method-forceState">forceState</a></span></span><span data-ice="signature">(state: <span>Immutable</span>)</span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>forceState - Funnels can accept new state an send state back up
the subscription chain.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
           <span data-ice="name"><span><a href="class/src/funnel.js~Funnel.html#instance-method-subscribe">subscribe</a></span></span><span data-ice="signature">(observer: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">function</a></span>): <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></span></span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>subscribe - Overwrites base Stream class&apos;s subscribe method.
Funnels should not emit state to subscribers until all source
streams have defined state.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
</tbody>
</table>
</div>

<div class="inherited-summary" data-ice="inheritedSummary"><h2>Inherited Summary</h2><table class="summary" data-ice="summary">
  <thead><tr><td data-ice="title" colspan="3"><span class="toggle closed"></span> From class <span><a href="class/src/stream.js~Stream.html">Stream</a></span></td></tr></thead>
  <tbody>
  
  <tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      <span class="kind" data-ice="kind">get</span>
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
           <span data-ice="name"><span><a href="class/src/stream.js~Stream.html#instance-get-state">state</a></span></span><span data-ice="signature">: <span>Immutable</span>: <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>get state - a getter for returning the current internal state of the Stream.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      <span class="kind" data-ice="kind">set</span>
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
           <span data-ice="name"><span><a href="class/src/stream.js~Stream.html#instance-set-state">state</a></span></span><span data-ice="signature">(newState: <span>type</span>): <span>type</span>: <span>*</span></span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>set state - a setter that&apos;s probably more clever than it needs to be. Instead of setting
the internal state, it calls <code>next</code>.</p>
<pre><code class="lang-javascript"><code class="source-code prettyprint">stream.next(newState)
// is functionally the same as
stream.state = newState</code>
</code></pre>
<p>Like I said, maybe too clever, but I thinks allow for a more delarative style when
writing transformers.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
           <span data-ice="name"><span><a href="class/src/stream.js~Stream.html#instance-method-forceState">forceState</a></span></span><span data-ice="signature">(state: <span>Immutable.Map</span>)</span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>forceState - called when hydrating state from another source.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
           <span data-ice="name"><span><a href="class/src/stream.js~Stream.html#instance-method-logStack">logStack</a></span></span><span data-ice="signature">(name: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String">string</a></span>, stack: <span><a href="class/src/stack.js~Stack.html">Stack</a></span>)</span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>logStack - Adds a stack to automatically add state changes.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
           <span data-ice="name"><span><a href="class/src/stream.js~Stream.html#instance-method-next">next</a></span></span><span data-ice="signature">(newState: <span>Immutable</span>)</span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>next - Receives new state (externally, ideally through a transformer) and verifies that the
new state is different from the Stream&apos;s current state before passing on to <code>sendState</code> (and,
all the observers, by extension).</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
<tr data-ice="target">
    <td>
      <span class="access" data-ice="access">public</span>
      
      
      
      <span class="override" data-ice="override"></span>
    </td>
    <td>
      <div>
        <p>
           <span data-ice="name"><span><a href="class/src/stream.js~Stream.html#instance-method-subscribe">subscribe</a></span></span><span data-ice="signature">(observer: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">function</a></span>): <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></span></span>
        </p>
      </div>
      <div>
        
        
        <div data-ice="description"><p>subscribe - takes a callback function that is executed any time the stream received <em>new</em>
state.</p>
</div>
      </div>
    </td>
    <td>
      
      
    </td>
  </tr>
</tbody>
</table>
</div>



<div data-ice="constructorDetails"><h2 data-ice="title">Public Constructors</h2>

<div class="detail" data-ice="detail">
  <h3 data-ice="anchor" id="instance-constructor-constructor">
    <span class="access" data-ice="access">public</span>
    
    
    
    
    <span data-ice="name">constructor</span><span data-ice="signature">(sourceMap: <span>Immutable.Map</span>): <span><a href="class/src/funnel.js~Funnel.html">Funnel</a></span></span>
    <span class="right-info">
      
      
      <span data-ice="source"><span><a href="file/src/funnel.js.html#lineNumber22">source</a></span></span>
    </span>
  </h3>

  
  
  
  <div data-ice="description"><p>A Funnel is a special type of Stream that combines the states from feeder
streams. Once all of the feeder streams have sent state, the Funnel will send the combined
state to any observers. When creating the Funnel, the sourceMap describes the shape of
the combined state. The key for each stream will be the key used to access the state of
that stream on the combined state object.</p>
</div>

  <div data-ice="override"><h4>Override:</h4><span><a href="class/src/stream.js~Stream.html#instance-constructor-constructor">Stream#constructor</a></span></div>

  <div data-ice="properties"><div data-ice="properties">
  <h4 data-ice="title">Params:</h4>
  <table class="params">
    <thead>
    <tr><td>Name</td><td>Type</td><td>Attribute</td><td>Description</td></tr>
    </thead>
    <tbody>
    
    <tr data-ice="property" data-depth="0">
      <td data-ice="name" data-depth="0">sourceMap</td>
      <td data-ice="type"><span>Immutable.Map</span></td>
      <td data-ice="appendix"></td>
      <td data-ice="description"><p>a Map of the feeder streams.</p>
</td>
    </tr>
</tbody>
  </table>
</div>
</div>

  <div class="return-params" data-ice="returnParams">
    <h4>Return:</h4>
    <table>
      <tr>
        <td class="return-type" data-ice="returnType"><span><a href="class/src/funnel.js~Funnel.html">Funnel</a></span></td>
        <td class="return-desc" data-ice="returnDescription"><p>returns an instance of the Funnel stream.</p>
</td>
      </tr>
    </table>
    <div data-ice="returnProperties">
</div>
  </div>

  

  

  

  

  

  
  
</div>
</div>

<div data-ice="methodDetails"><h2 data-ice="title">Public Methods</h2>

<div class="detail" data-ice="detail">
  <h3 data-ice="anchor" id="instance-method-destroy">
    <span class="access" data-ice="access">public</span>
    
    
    
    
    <span data-ice="name">destroy</span><span data-ice="signature">()</span>
    <span class="right-info">
      
      
      <span data-ice="source"><span><a href="file/src/funnel.js.html#lineNumber140">source</a></span></span>
    </span>
  </h3>

  
  
  
  <div data-ice="description"><p>destroy - cleans up a Funnel&apos;s feeder subscribers.</p>
</div>

  

  <div data-ice="properties">
</div>

  

  

  

  

  

  

  
  
</div>
<div class="detail" data-ice="detail">
  <h3 data-ice="anchor" id="instance-method-forceState">
    <span class="access" data-ice="access">public</span>
    
    
    
    
    <span data-ice="name">forceState</span><span data-ice="signature">(state: <span>Immutable</span>)</span>
    <span class="right-info">
      
      
      <span data-ice="source"><span><a href="file/src/funnel.js.html#lineNumber129">source</a></span></span>
    </span>
  </h3>

  
  
  
  <div data-ice="description"><p>forceState - Funnels can accept new state an send state back up
the subscription chain. This should only be used in cases of
restoring state.</p>
</div>

  <div data-ice="override"><h4>Override:</h4><span><a href="class/src/stream.js~Stream.html#instance-method-forceState">Stream#forceState</a></span></div>

  <div data-ice="properties"><div data-ice="properties">
  <h4 data-ice="title">Params:</h4>
  <table class="params">
    <thead>
    <tr><td>Name</td><td>Type</td><td>Attribute</td><td>Description</td></tr>
    </thead>
    <tbody>
    
    <tr data-ice="property" data-depth="0">
      <td data-ice="name" data-depth="0">state</td>
      <td data-ice="type"><span>Immutable</span></td>
      <td data-ice="appendix"></td>
      <td data-ice="description"><p>The new state to hydrate the funnel.</p>
</td>
    </tr>
</tbody>
  </table>
</div>
</div>

  

  

  

  

  

  

  
  
</div>
<div class="detail" data-ice="detail">
  <h3 data-ice="anchor" id="instance-method-subscribe">
    <span class="access" data-ice="access">public</span>
    
    
    
    
    <span data-ice="name">subscribe</span><span data-ice="signature">(observer: <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">function</a></span>): <span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></span></span>
    <span class="right-info">
      
      
      <span data-ice="source"><span><a href="file/src/funnel.js.html#lineNumber101">source</a></span></span>
    </span>
  </h3>

  
  
  
  <div data-ice="description"><p>subscribe - Overwrites base Stream class&apos;s subscribe method.
Funnels should not emit state to subscribers until all source
streams have defined state.</p>
</div>

  <div data-ice="override"><h4>Override:</h4><span><a href="class/src/stream.js~Stream.html#instance-method-subscribe">Stream#subscribe</a></span></div>

  <div data-ice="properties"><div data-ice="properties">
  <h4 data-ice="title">Params:</h4>
  <table class="params">
    <thead>
    <tr><td>Name</td><td>Type</td><td>Attribute</td><td>Description</td></tr>
    </thead>
    <tbody>
    
    <tr data-ice="property" data-depth="0">
      <td data-ice="name" data-depth="0">observer</td>
      <td data-ice="type"><span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">function</a></span></td>
      <td data-ice="appendix"></td>
      <td data-ice="description"><p>the obeserver function to listen to state changes.</p>
</td>
    </tr>
</tbody>
  </table>
</div>
</div>

  <div class="return-params" data-ice="returnParams">
    <h4>Return:</h4>
    <table>
      <tr>
        <td class="return-type" data-ice="returnType"><span><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object">object</a></span></td>
        <td class="return-desc" data-ice="returnDescription"><p>a subscriber object</p>
</td>
      </tr>
    </table>
    <div data-ice="returnProperties">
</div>
  </div>

  

  

  

  

  

  
  
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.7)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
