<h3 id="wiring-up-ui-components">Wiring Up UI Components</h3>
<p>Since the Protonic Pattern is framework agnostic, the specific implementation details will be determined by whichever framework is rendering your interface. (It’s also important to note that the pattern isn’t limited to an interface being a <em>UI</em> interface.)</p>
<h4 id="example-components">Example components</h4>
<p>We’ll demonstrate an oversimplified example of components in both Angular (1.5, but the concept applies as well to 2.0) and React. In both cases, we’ll assume that a stream called <code>AppStream</code> will send the following state:</p>
<pre><code class="lang-javascript">Immutable.Map({
  id: 3,
  name: &#39;Jessika Pava&#39;,
  callsign: &#39;Blue Three&#39;,
  fighter: &#39;T-70 X-Wing&#39;,
  affiliation: &#39;Resistance&#39;,
  sorties: 18
})
</code></pre>
<h4 id="angular-1-5">Angular 1.5</h4>
<p><em>In an effort to reduce complexity, we aren’t using Angular’s Dependency Injection here. If you need DI, you can create a service as a wrapper around the stream. Additionally, changes in state won’t automatically trigger a digest cycle. An example of how to do with will be provided later on.</em></p>
<pre><code class="lang-javascript">
import AppStream from &#39;path/to/app-stream&#39;;
import { incrementPilotSortie } from &#39;path/to/actions&#39;;

export default {
  template: &#39;... some template ...&#39;,
  bindings: {},
  controller: function(){
    let subscriber;
    // Initial state.
    this.pilot = {
      name: &#39;&#39;,
      callsign: &#39;&#39;
      fighter: &#39;&#39;,
      affiliation: &#39;&#39;,
      sorties: 0
    };

    // Lifecycle methods.
    // $onInit sets up the state subscriber.
    this.$onInit = function () {
      subscriber = AppStream.subscribe(state =&gt; this.pilot = state.toJS())
    }

    // $onDestroy cleans up the subscriber
    this.$onDestroy = () =&gt; {
      subscriber.unsubscribe()
    }

    // A method to be called from the UI
    // which in turn calls an action.
    this.incrementSortie = () =&gt; {
      incrementPilotSortie(this.pilot.id);
    }
  }
}
</code></pre>
<h4 id="react">React</h4>
<pre><code class="lang-javascript">import AppStream from &#39;path/to/app-stream&#39;;
import { incrementPilotSortie } from &#39;path/to/actions&#39;;

export default React.createClass({
  getInitialState: function() {
    return { pilot:{
              name: &#39;&#39;,
              callsign: &#39;&#39;
              fighter: &#39;&#39;,
              affiliation: &#39;&#39;,
              sorties: 0
            }
          }
  },
  componentDidMount: function() {
    this.subscriber = AppStream.subscribe(state =&gt; this.setState({ pilot: state.toJS() }));
  },
  componentWillUnmount: function() {
    this.subscriber.unsubscribe();
  },
  incrementSortie: function() {
    incrementPilotSortie(this.state.pilot.id);
  },
  render: function() {
    return ( /*... some jsx  ... */ );
  }
})
</code></pre>
